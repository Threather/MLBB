<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Registration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .registration-form {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 600;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .team-selection {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .team-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .team-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .team-btn.team1 {
            border-color: #4CAF50;
            color: #4CAF50;
        }
        
        .team-btn.team1.selected {
            background: #4CAF50;
            color: white;
        }
        
        .team-btn.team2 {
            border-color: #2196F3;
            color: #2196F3;
        }
        
        .team-btn.team2.selected {
            background: #2196F3;
            color: white;
        }
        
        .team-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .teams-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .team-box {
            border-radius: 10px;
            padding: 20px;
            color: white;
        }
        
        .team-box.team1 {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }
        
        .team-box.team2 {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
        }
        
        .team-box h2 {
            margin-bottom: 15px;
            font-size: 24px;
        }
        
        .team-count {
            font-size: 14px;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .member-list {
            list-style: none;
        }
        
        .member-item {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .delete-btn {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .delete-btn:hover {
            background: rgba(255,255,255,0.5);
        }
        
        .message {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }
        
        .message.success {
            background: #d4edda;
            color: #155724;
        }
        
        .message.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .reset-btn {
            margin-top: 20px;
            width: 100%;
            padding: 10px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .reset-btn:hover {
            background: #c82333;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        @media (max-width: 600px) {
            .teams-display {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÜ Team Registration</h1>
        
        <div id="message"></div>
        <div id="loading" class="loading">Loading...</div>
        
        <div class="registration-form" id="registrationForm" style="display:none;">
            <div class="form-group">
                <label for="nameInput">Your Name:</label>
                <input type="text" id="nameInput" placeholder="Enter your name" maxlength="50">
            </div>
            
            <div class="team-selection">
                <button class="team-btn team1" id="team1Btn" onclick="selectTeam(1)">
                    Team 1 <span id="team1Count">(0/5)</span>
                </button>
                <button class="team-btn team2" id="team2Btn" onclick="selectTeam(2)">
                    Team 2 <span id="team2Count">(0/5)</span>
                </button>
            </div>
            
            <button class="submit-btn" onclick="registerName()">Register</button>
        </div>
        
        <div class="teams-display" id="teamsDisplay" style="display:none;">
            <div class="team-box team1">
                <h2>Team 1</h2>
                <div class="team-count"><span id="team1Display">0/5 slots filled</span></div>
                <ul class="member-list" id="team1List"></ul>
            </div>
            
            <div class="team-box team2">
                <h2>Team 2</h2>
                <div class="team-count"><span id="team2Display">0/5 slots filled</span></div>
                <ul class="member-list" id="team2List"></ul>
            </div>
        </div>
        
        <button class="reset-btn" id="resetBtn" onclick="resetAll()" style="display:none;">Reset All Teams</button>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <script>
        // ‚ö†Ô∏è REPLACE THIS WITH YOUR FIREBASE CONFIG FROM STEP 3!
const firebaseConfig = {
    apiKey: "AIzaSyBCtMpRUf4FPJfZaMNw8COEEbZFFjoTkwI",
    authDomain: "team-registration-78a5e.firebaseapp.com",
    databaseURL: "https://team-registration-78a5e-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "team-registration-78a5e",
    storageBucket: "team-registration-78a5e.firebasestorage.app",
    messagingSenderId: "43533030700",
    appId: "1:43533030700:web:03be14e6eda0e651530889"
};

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const teamsRef = database.ref('teams');
        
        let selectedTeam = null;
        let currentData = { team1: [], team2: [] };
        
        // Listen for real-time updates
        teamsRef.on('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                currentData = data;
            } else {
                currentData = { team1: [], team2: [] };
            }
            updateDisplay();
            
            // Hide loading, show content
            document.getElementById('loading').style.display = 'none';
            document.getElementById('registrationForm').style.display = 'block';
            document.getElementById('teamsDisplay').style.display = 'grid';
            document.getElementById('resetBtn').style.display = 'block';
        });
        
        // Select team
        function selectTeam(teamNum) {
            selectedTeam = teamNum;
            document.getElementById('team1Btn').classList.remove('selected');
            document.getElementById('team2Btn').classList.remove('selected');
            document.getElementById(`team${teamNum}Btn`).classList.add('selected');
        }
        
        // Show message
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
            
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 3000);
        }
        
        // Register name
        function registerName() {
            const nameInput = document.getElementById('nameInput');
            const name = nameInput.value.trim();
            
            if (!name) {
                showMessage('Please enter your name!', 'error');
                return;
            }
            
            if (!selectedTeam) {
                showMessage('Please select a team!', 'error');
                return;
            }
            
            const teamKey = `team${selectedTeam}`;
            
            // Check if team is full
            if (currentData[teamKey].length >= 5) {
                showMessage(`Team ${selectedTeam} is full!`, 'error');
                return;
            }
            
            // Check if name already exists in either team
            if (currentData.team1.includes(name) || currentData.team2.includes(name)) {
                showMessage('This name is already registered!', 'error');
                return;
            }
            
            // Add to team in Firebase
            currentData[teamKey].push(name);
            teamsRef.set(currentData)
                .then(() => {
                    showMessage(`${name} registered to Team ${selectedTeam}!`, 'success');
                    nameInput.value = '';
                    selectedTeam = null;
                    document.getElementById('team1Btn').classList.remove('selected');
                    document.getElementById('team2Btn').classList.remove('selected');
                })
                .catch((error) => {
                    showMessage('Error: ' + error.message, 'error');
                });
        }
        
        // Delete member
        function deleteMember(team, name) {
            if (confirm(`Remove ${name} from Team ${team}?`)) {
                const teamKey = `team${team}`;
                currentData[teamKey] = currentData[teamKey].filter(n => n !== name);
                teamsRef.set(currentData)
                    .then(() => {
                        showMessage(`${name} removed from Team ${team}`, 'success');
                    })
                    .catch((error) => {
                        showMessage('Error: ' + error.message, 'error');
                    });
            }
        }
        
        // Reset all
        function resetAll() {
            if (confirm('Are you sure you want to reset all teams? This cannot be undone!')) {
                teamsRef.set({ team1: [], team2: [] })
                    .then(() => {
                        showMessage('All teams have been reset!', 'success');
                    })
                    .catch((error) => {
                        showMessage('Error: ' + error.message, 'error');
                    });
            }
        }
        
        // Update display
        function updateDisplay() {
            // Update Team 1
            const team1List = document.getElementById('team1List');
            team1List.innerHTML = '';
            currentData.team1.forEach(name => {
                const li = document.createElement('li');
                li.className = 'member-item';
                li.innerHTML = `
                    <span>${name}</span>
                    <button class="delete-btn" onclick="deleteMember(1, '${name.replace(/'/g, "\\'")}')">‚úï</button>
                `;
                team1List.appendChild(li);
            });
            
            // Update Team 2
            const team2List = document.getElementById('team2List');
            team2List.innerHTML = '';
            currentData.team2.forEach(name => {
                const li = document.createElement('li');
                li.className = 'member-item';
                li.innerHTML = `
                    <span>${name}</span>
                    <button class="delete-btn" onclick="deleteMember(2, '${name.replace(/'/g, "\\'")}')">‚úï</button>
                `;
                team2List.appendChild(li);
            });
            
            // Update counts
            document.getElementById('team1Count').textContent = `(${currentData.team1.length}/5)`;
            document.getElementById('team2Count').textContent = `(${currentData.team2.length}/5)`;
            document.getElementById('team1Display').textContent = `${currentData.team1.length}/5 slots filled`;
            document.getElementById('team2Display').textContent = `${currentData.team2.length}/5 slots filled`;
            
            // Disable full teams
            document.getElementById('team1Btn').disabled = currentData.team1.length >= 5;
            document.getElementById('team2Btn').disabled = currentData.team2.length >= 5;
        }
    </script>
</body>
</html>